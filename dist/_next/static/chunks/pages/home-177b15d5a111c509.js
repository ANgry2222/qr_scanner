(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[845],{6610:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(9175)}])},9175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ei});var s=n(4848),a=n(7940),l=n.n(a),i=n(9222);let r=(0,i.Z0)({name:"modal",initialState:{isOpen:!1},reducers:{closeModal:e=>{e.isOpen=!1},openModal:e=>{e.isOpen=!0}}}),{closeModal:_,openModal:c}=r.actions,o=r.reducer,d=(0,i.Z0)({name:"items",initialState:{items:[]},reducers:{clearItemsList:e=>{e.items=[]},addItem:(e,t)=>{e.items.push(t.payload)},removeItemByIndex:(e,t)=>{e.items=e.items.filter((e,n)=>n!==t.payload)}}}),{clearItemsList:m,addItem:u,removeItemByIndex:h}=d.actions,p=d.reducer;var f=n(1468);let x=f.wA.withTypes(),v=f.d4.withTypes();var C=n(6540);let b=e=>{let{children:t}=e,n=x();return(0,s.jsxs)("div",{className:l().results_table,children:[(0,s.jsxs)("div",{className:l().results_table__table_header,children:[(0,s.jsx)("p",{className:l().table_header__p,children:"Результаты сканирования"}),(0,s.jsxs)("svg",{className:l().table_header__add_item_button,onClick:()=>n(c()),width:"51",height:"51",viewBox:"0 0 51 51",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M3 25.5H48",stroke:"#2F4157",strokeWidth:"5",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M25.5 48L25.5 3",stroke:"#2F4157",strokeWidth:"5",strokeLinecap:"round"})]}),(0,s.jsx)("svg",{className:l().table_header__clear_all_button,onClick:()=>n(m()),width:"45",height:"52",viewBox:"0 0 45 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M19.2857 0C15.75 0 12.8571 2.89286 12.8571 6.42857H6.42857C2.89286 6.42857 0 9.32143 0 12.8571H45C45 9.32143 42.1071 6.42857 38.5714 6.42857H32.1429C32.1429 2.89286 29.25 0 25.7143 0H19.2857ZM6.42857 19.2857V50.2071C6.42857 50.9143 6.94286 51.4286 7.65 51.4286H37.4143C38.1214 51.4286 38.6357 50.9143 38.6357 50.2071V19.2857H32.2071V41.7857C32.2071 43.5857 30.7929 45 28.9929 45C27.1929 45 25.7786 43.5857 25.7786 41.7857V19.2857H19.35V41.7857C19.35 43.5857 17.9357 45 16.1357 45C14.3357 45 12.9214 43.5857 12.9214 41.7857V19.2857H6.49286H6.42857Z",fill:"#2F4157"})})]}),(0,s.jsx)("div",{className:l().results_table__items_list,children:t})]})};var j=n(9504),g=n.n(j);function L(e){var t,n;let{scanResult:a,onDelete:l}=e,{scanSum:i,scanDate:r,scanTime:_}=a,[c,o]=(0,C.useState)(0),[d,m]=(0,C.useState)(!1),[u,h]=(0,C.useState)(0),p=(0,C.useRef)(null),f=e=>{h(e.clientX-5),m(!0)},x=e=>{d&&!(e.clientX-5>u)&&o(Math.abs(u-e.clientX+5))};return(0,s.jsx)("div",{ref:p,className:g().list_element_container,children:(0,s.jsxs)("div",{onMouseDown:e=>f(e),onMouseUp:()=>{var e;m(!1),c>.5*((null===(e=p.current)||void 0===e?void 0:e.clientWidth)||3)&&l(),o(0),h(0)},onMouseMove:e=>x(e),onMouseLeave:()=>{d&&(m(!1),o(0),h(0))},style:{left:"-".concat(c,"px")},className:g().list_element,children:[(0,s.jsx)("span",{className:g().list_element__sum,children:i||0}),(0,s.jsx)("span",{className:g().list_element__date,children:r}),(0,s.jsx)("span",{className:g().list_element__time,children:_}),(0,s.jsx)("svg",{style:{opacity:"".concat(c/(.3*((null===(t=p.current)||void 0===t?void 0:t.clientWidth)||3)))},className:g().delete_swipe_indicator,width:"45",height:"52",viewBox:"0 0 45 52",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M19.2857 0C15.75 0 12.8571 2.89286 12.8571 6.42857H6.42857C2.89286 6.42857 0 9.32143 0 12.8571H45C45 9.32143 42.1071 6.42857 38.5714 6.42857H32.1429C32.1429 2.89286 29.25 0 25.7143 0H19.2857ZM6.42857 19.2857V50.2071C6.42857 50.9143 6.94286 51.4286 7.65 51.4286H37.4143C38.1214 51.4286 38.6357 50.9143 38.6357 50.2071V19.2857H32.2071V41.7857C32.2071 43.5857 30.7929 45 28.9929 45C27.1929 45 25.7786 43.5857 25.7786 41.7857V19.2857H19.35V41.7857C19.35 43.5857 17.9357 45 16.1357 45C14.3357 45 12.9214 43.5857 12.9214 41.7857V19.2857H6.49286H6.42857Z",fill:c>.5*((null===(n=p.current)||void 0===n?void 0:n.clientWidth)||3)?"red":"white"})})]})})}var w=n(3946),N=n.n(w);function M(){let e=v(e=>e.scanItems.items);return(0,s.jsx)("div",{className:N().total_sum__container,children:(0,s.jsxs)("span",{children:["Общая сумма: ",e.reduce((e,t)=>e+parseFloat(t.scanSum),0).toFixed(2)]})})}function S(){let e=x(),t=v(e=>e.scanItems.items);return(0,s.jsxs)("div",{className:"results_container",children:[(0,s.jsx)(b,{children:null==t?void 0:t.map((t,n)=>(0,s.jsx)(L,{scanResult:t,onDelete:()=>e(h(n))},n))}),(0,s.jsx)(M,{})]})}var Z=n(2798);let R={src:"/qr_scanner//_next/static/media/start_button_desktop.2f05e0df.png"},k={src:"/qr_scanner//_next/static/media/cross_icon_mobile.8f884fee.png"},B={src:"/qr_scanner//_next/static/media/cross_icon_desktop.383ce1f8.png"},y={src:"/qr_scanner//_next/static/media/turn_camera_icon.8918078d.png"};var H=n(159);let F=(0,i.Z0)({name:"scanner",initialState:{scanner:void 0},reducers:{setScanner:(e,t)=>{e.scanner=t.payload},stopScanner:e=>{e.scanner&&e.scanner.stop()}}}),{setScanner:T,stopScanner:V}=F.actions,E=F.reducer,D=(0,i.Z0)({name:"animation",initialState:{isAnimating:!1},reducers:{setAnimation:(e,t)=>{e.isAnimating=t.payload}}}),{setAnimation:I}=D.actions,O=D.reducer,U=(0,i.U1)({reducer:{modal:o,scanItems:p,scannerReducer:E,animate:O}});var q=n(9965),A=n.n(q);function W(){let[e,t]=(0,C.useState)(!1),n=x(),a=()=>{n(V()),t(!1)};return e?H.xl?(0,s.jsx)(A(),{onClick:a,src:B.src,alt:"Остановить сканирование"}):(0,s.jsxs)("div",{children:[(0,s.jsx)(A(),{style:{marginRight:"27px"},onClick:()=>{console.log("reverse")},src:y.src,alt:"Поворот камеры"}),(0,s.jsx)(A(),{onClick:a,src:k.src,alt:"Остановить сканирование"})]}):(0,s.jsx)(A(),{onClick:()=>{Z.j9.getCameras().then(e=>{if(e)try{!function(e){let t="",n={verbose:!1,formatsToSupport:[Z.Jl.QR_CODE]},s=new Z.j9("reader",n);U.dispatch(T(s)),s.start(e[0].id,{aspectRatio:1,fps:18},e=>{t!==e&&(U.dispatch(I(!0)),setTimeout(()=>{U.dispatch(I(!1))},1),t=e,U.dispatch(u(function(e){let t=e.split("&")[1].substring(2),n=e.split("&")[0].substring(2),s=n.substring(0,8),a="".concat(s.substring(6),".").concat(s.substring(4,6),".").concat(s.substring(0,4)),l=n.substring(9);return{scanSum:t,scanDate:a,scanTime:"".concat(l.substring(0,2),":").concat(l.substring(2,4))}}(e))))},e=>{console.log(e)}).catch(e=>{alert("Произошла ошибка сканирования ".concat(e.message))})}(e),t(!0)}catch(e){console.log(e)}}).catch(e=>{alert(e)})},src:R.src,alt:"Начать сканирование"})}var K=n(2670),X=n.n(K);function P(){let e=v(e=>e.animate.isAnimating),[t,n]=(0,C.useState)(X().border_element);return(0,C.useEffect)(()=>{e?n("".concat(X().border_element," ").concat(X().animation)):n(X().border_element)},[e]),(0,s.jsxs)("div",{className:X().overlay_container,children:[(0,s.jsx)("div",{className:X().buttons_panel,children:(0,s.jsx)(W,{})}),(0,s.jsxs)("svg",{className:X().top_left_element,width:"85",height:"85",viewBox:"0 0 85 85",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{className:t,d:"M0 5C1.20706e-07 2.23858 2.23858 -1.20706e-07 5 0C7.76142 1.20706e-07 10 2.23858 10 5L0 5ZM10 5L10 85L-3.49691e-06 85L0 5L10 5Z",fill:"white"}),(0,s.jsx)("path",{className:t,d:"M80 75C82.7614 75 85 77.2386 85 80C85 82.7614 82.7614 85 80 85L80 75ZM80 85L-4.37114e-07 85L4.37114e-07 75L80 75L80 85Z",fill:"white"})]}),(0,s.jsxs)("svg",{className:X().top_right_element,width:"85",height:"85",viewBox:"0 0 85 85",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M0 5C1.20706e-07 2.23858 2.23858 -1.20706e-07 5 0C7.76142 1.20706e-07 10 2.23858 10 5L0 5ZM10 5L10 85L-3.49691e-06 85L0 5L10 5Z",className:t}),(0,s.jsx)("path",{d:"M80 75C82.7614 75 85 77.2386 85 80C85 82.7614 82.7614 85 80 85L80 75ZM80 85L-4.37114e-07 85L4.37114e-07 75L80 75L80 85Z",className:t})]}),(0,s.jsxs)("svg",{className:X().bottom_left_element,width:"85",height:"85",viewBox:"0 0 85 85",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M0 5C1.20706e-07 2.23858 2.23858 -1.20706e-07 5 0C7.76142 1.20706e-07 10 2.23858 10 5L0 5ZM10 5L10 85L-3.49691e-06 85L0 5L10 5Z",className:t}),(0,s.jsx)("path",{d:"M80 75C82.7614 75 85 77.2386 85 80C85 82.7614 82.7614 85 80 85L80 75ZM80 85L-4.37114e-07 85L4.37114e-07 75L80 75L80 85Z",className:t})]}),(0,s.jsxs)("svg",{className:X().bottom_right_element,width:"85",height:"85",viewBox:"0 0 85 85",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M0 5C1.20706e-07 2.23858 2.23858 -1.20706e-07 5 0C7.76142 1.20706e-07 10 2.23858 10 5L0 5ZM10 5L10 85L-3.49691e-06 85L0 5L10 5Z",className:t}),(0,s.jsx)("path",{d:"M80 75C82.7614 75 85 77.2386 85 80C85 82.7614 82.7614 85 80 85L80 75ZM80 85L-4.37114e-07 85L4.37114e-07 75L80 75L80 85Z",className:t})]})]})}var z=n(5354),G=n.n(z);function J(){return(0,s.jsxs)("div",{className:G().scanner_area,children:[(0,s.jsx)("div",{id:"reader"}),(0,s.jsx)(P,{})]})}function Q(){return(0,s.jsx)("div",{className:"scanner_container",children:(0,s.jsx)(J,{})})}var Y=n(961),$=n(514),ee=n.n($);function et(){let e=x(),[t,n]=(0,C.useState)({field1:"",field2:"",field3:""}),a=(0,C.useRef)(null),l=(0,C.useRef)(null),i=e=>{var t,s,i,r;let{name:_,value:c}=e.target;"field1"===_&&(null===(t=a.current)||void 0===t?void 0:t.classList.contains(ee().input_error))&&(null===(i=a.current)||void 0===i||i.classList.remove(ee().input_error)),"field3"===_&&(null===(s=l.current)||void 0===s?void 0:s.classList.contains(ee().input_error))&&(null===(r=l.current)||void 0===r||r.classList.remove(ee().input_error)),n(e=>({...e,[_]:c}))},r=()=>{n({field1:"",field2:"",field3:""}),e(_())};return(0,s.jsxs)("div",{className:ee().modal_form_section,children:[(0,s.jsxs)("p",{className:ee().form_header,children:["Добавить покупку",(0,s.jsx)("br",{}),"вручную"]}),(0,s.jsx)("svg",{onClick:r,className:ee().close_btn,fill:"#2F4157",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{"clip-path":"url(#clip0_35058_777)",children:[(0,s.jsx)("path",{d:"M20.4792 3.51199C19.3657 2.39641 18.0429 1.51171 16.5866 0.90868C15.1304 0.305652 13.5694 -0.00383162 11.9932 -0.00200613C5.36519 -0.00200613 -0.0078125 5.37099 -0.0078125 11.999C-0.0078125 15.313 1.33619 18.314 3.50819 20.486C4.62165 21.6016 5.94447 22.4863 7.40073 23.0893C8.85699 23.6923 10.418 24.0018 11.9942 24C18.6222 24 23.9952 18.627 23.9952 11.999C23.9952 8.68499 22.6512 5.68399 20.4792 3.51199ZM18.9372 18.939C18.026 19.8516 16.9437 20.5754 15.7523 21.069C14.5609 21.5625 13.2838 21.816 11.9942 21.815C6.57119 21.815 2.17519 17.419 2.17519 11.996C2.17417 10.7064 2.42769 9.42928 2.92122 8.23786C3.41474 7.04644 4.13856 5.96413 5.05119 5.05299C5.96221 4.14049 7.04435 3.41674 8.23559 2.92322C9.42683 2.4297 10.7038 2.17611 11.9932 2.17699C17.4152 2.17699 21.8112 6.57299 21.8112 11.995C21.8121 13.2844 21.5585 14.5613 21.065 15.7526C20.5714 16.9438 19.8477 18.026 18.9352 18.937L18.9372 18.939Z"}),(0,s.jsx)("path",{d:"M13.5375 12L17.3925 8.14499C17.5827 7.93772 17.6855 7.66501 17.6794 7.38379C17.6733 7.10257 17.5588 6.83457 17.3598 6.63574C17.1609 6.4369 16.8928 6.3226 16.6116 6.31668C16.3303 6.31077 16.0577 6.4137 15.8505 6.60399L15.8515 6.60299L11.9965 10.458L8.14154 6.60299C7.93427 6.41283 7.66156 6.31008 7.38034 6.31617C7.09912 6.32227 6.83112 6.43675 6.63229 6.63572C6.43345 6.83468 6.31915 7.10275 6.31323 7.38398C6.30732 7.6652 6.41025 7.93784 6.60054 8.14499L6.59954 8.14399L10.4545 11.999L6.59954 15.854C6.49108 15.9535 6.40387 16.0739 6.34318 16.208C6.28248 16.3421 6.24954 16.4871 6.24635 16.6343C6.24316 16.7814 6.26978 16.9277 6.32461 17.0643C6.37944 17.2009 6.46134 17.325 6.56539 17.4291C6.66944 17.5332 6.79348 17.6152 6.93004 17.6701C7.06661 17.7251 7.21287 17.7518 7.36004 17.7487C7.5072 17.7456 7.65221 17.7127 7.78635 17.6521C7.92048 17.5915 8.04096 17.5044 8.14054 17.396L8.14154 17.395L11.9965 13.54L15.8515 17.395C15.951 17.5035 16.0715 17.5907 16.2056 17.6514C16.3397 17.7121 16.4847 17.745 16.6318 17.7482C16.779 17.7514 16.9253 17.7248 17.0619 17.6699C17.1985 17.6151 17.3226 17.5332 17.4267 17.4291C17.5308 17.3251 17.6128 17.2011 17.6677 17.0645C17.7226 16.9279 17.7493 16.7817 17.7462 16.6345C17.7431 16.4873 17.7103 16.3423 17.6497 16.2082C17.5891 16.0741 17.5019 15.9536 17.3935 15.854L17.3925 15.853L13.5375 12Z"})]})}),(0,s.jsxs)("form",{className:ee().modal_form__form,onSubmit:n=>{if(n.preventDefault(),t.field1&&t.field3){let n=t.field1;n.includes(".")||(n+=".00");let s="".concat(t.field3.split("-")[2],".").concat(t.field3.split("-")[1],".").concat(t.field3.split("-")[0].substring(0,4));e(u({scanSum:n,scanTime:t.field2||"00:00",scanDate:s})),r()}else{var s,i;t.field1||null===(s=a.current)||void 0===s||s.classList.add(ee().input_error),t.field3||null===(i=l.current)||void 0===i||i.classList.add(ee().input_error)}},children:[(0,s.jsxs)("div",{className:ee().field_container,children:[(0,s.jsx)("p",{className:ee().field_container__p,children:"Сумма покупки"}),(0,s.jsx)("input",{ref:a,className:ee().field_container__input,maxLength:10,type:"number",name:"field1",value:t.field1,onChange:i,placeholder:"12345.67"})]}),(0,s.jsxs)("div",{className:ee().field_container,children:[(0,s.jsx)("p",{className:ee().field_container__p,children:"Время покупки"}),(0,s.jsx)("input",{className:ee().field_container__input,maxLength:5,type:"time",name:"field2",value:t.field2,onChange:i})]}),(0,s.jsxs)("div",{className:ee().field_container,children:[(0,s.jsx)("p",{className:ee().field_container__p,children:"Дата покупки"}),(0,s.jsx)("input",{ref:l,className:ee().field_container__input,maxLength:8,type:"date",name:"field3",value:t.field3,onChange:i,placeholder:"ДД.ММ.ГГГГ"})]}),(0,s.jsx)("button",{className:ee().submit_button,type:"submit",children:"Добавить"})]})]})}function en(){let e=v(e=>e.modal.isOpen),t=x(),n=(0,C.useRef)(null);(0,C.useEffect)(()=>{var t,s;e?null===(t=n.current)||void 0===t||t.showModal():null===(s=n.current)||void 0===s||s.close()},[e]);let a=e=>{"Escape"===e.key&&t(_())};return e?(0,Y.createPortal)((0,s.jsx)("dialog",{ref:n,autoFocus:!0,onKeyDown:e=>a(e),className:"open_dialog",children:(0,s.jsx)(et,{})}),document.body):null}var es=n(386),ea=n.n(es);function el(){let e=v(e=>e.scanItems.items);return(0,s.jsx)("button",{className:ea().button,onClick:()=>{let t=new Blob([e.map(e=>"".concat(e.scanSum," - ").concat(e.scanDate," - ").concat(e.scanTime)).join("\n")],{type:"text/plain"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download="РезультатыСканирования.txt",document.body.appendChild(s),s.click(),URL.revokeObjectURL(n),document.body.removeChild(s)},children:"Скачать результаты"})}function ei(){return(0,s.jsx)(f.Kq,{store:U,children:(0,s.jsxs)("div",{className:"app_container",children:[(0,s.jsx)(en,{}),(0,s.jsx)(Q,{}),(0,s.jsx)(S,{}),(0,s.jsx)(el,{})]})})}},386:e=>{e.exports={button:"DownloadResultsButton_button__ipUfj"}},514:e=>{e.exports={form_header:"ModalForm_form_header__v8W_K",modal_form_section:"ModalForm_modal_form_section__7C0qL",close_btn:"ModalForm_close_btn__fT5oK",modal_form__form:"ModalForm_modal_form__form__gd7_p",field_container:"ModalForm_field_container__k03g7",field_container__p:"ModalForm_field_container__p__0HF7n",field_container__input:"ModalForm_field_container__input__68idj",submit_button:"ModalForm_submit_button__t8rMj",input_error:"ModalForm_input_error__3Ak_g"}},7940:e=>{e.exports={results_table__table_header:"ResultsTable_results_table__table_header__HFhBR",results_table__items_list:"ResultsTable_results_table__items_list__AjkBP",table_header__p:"ResultsTable_table_header__p__vJBLK",table_header__add_item_button:"ResultsTable_table_header__add_item_button__Svnpm",table_header__clear_all_button:"ResultsTable_table_header__clear_all_button__rAien"}},9504:e=>{e.exports={list_element_container:"ScanResult_list_element_container__7Mc98",list_element:"ScanResult_list_element__Tcftx",list_element__sum:"ScanResult_list_element__sum__BesRU",list_element__date:"ScanResult_list_element__date__B10eK",list_element__time:"ScanResult_list_element__time__TFquj",delete_swipe_indicator:"ScanResult_delete_swipe_indicator__u_tSQ"}},5354:e=>{e.exports={scanner_area:"ScanWindow_scanner_area__poddw",scanner_div:"ScanWindow_scanner_div__LTo6h"}},2670:e=>{e.exports={overlay_container:"ScannerBorder_overlay_container__kx4ZZ",buttons_panel:"ScannerBorder_buttons_panel__eBvMB",border_element:"ScannerBorder_border_element__GyoRZ",animation:"ScannerBorder_animation__U5qpn",success_scan:"ScannerBorder_success_scan___rERZ",top_left_element:"ScannerBorder_top_left_element__uhivg",top_right_element:"ScannerBorder_top_right_element__V_TzS",bottom_left_element:"ScannerBorder_bottom_left_element__eKVFn",bottom_right_element:"ScannerBorder_bottom_right_element__9NGzc"}},3946:e=>{e.exports={total_sum__container:"TotalSum_total_sum__container__8do_I"}}},e=>{var t=t=>e(e.s=t);e.O(0,[59,965,828,636,593,792],()=>t(6610)),_N_E=e.O()}]);